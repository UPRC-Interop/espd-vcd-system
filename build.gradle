subprojects { project ->
    apply plugin: 'java'
    apply plugin: 'maven'
    apply plugin: 'maven-publish'

    version = '1.1.0-SNAPSHOT'
    group = 'eu.esens.espdvcd'

    project.ext.slf4j_version = '1.7.13'
    project.ext.log4j2_version = '2.4.1'
    project.ext.jaxb_impl_version = '2.2.11'
    project.ext.jaxb_api_version = '2.2.12'
    project.ext.hibernate_version = '5.0.3.Final'
    project.ext.postgresql_version = '9.4-1205-jdbc42'
    project.ext.h2_version = '1.4.190'

    project.ext.libraries = [
        /* logging */
        slf4j_api       : "org.slf4j:slf4j-api:${project.slf4j_version}",
        log4j_slf4j_impl: "org.apache.logging.log4j:log4j-slf4j-impl:${project.log4j2_version}",
        log4j_core      : "org.apache.logging.log4j:log4j-core:${project.log4j2_version}",
        log4j_api       : "org.apache.logging.log4j:log4j-api:${project.log4j2_version}"
    ]   

    repositories {
        mavenCentral()
        jcenter()
    }
    
}

// publishing definition
configure (subprojects - project(':designer')) {
    task javadocJar (type: Jar, dependsOn: javadoc) { // (1)
        classifier = 'javadoc'
        from javadoc.destinationDir
    }

    task sourcesJar (type : Jar) {
        classifier = 'sources'
        from sourceSets.main.allSource
    }
    
    artifacts {
    archives javadocJar
    archives sourcesJar
}

uploadArchives {
    repositories.mavenDeployer {
        repository(url: "http://nexus.e-sens.gr/content/repositories/${project.version.endsWith('-SNAPSHOT') ? 'snapshots' : 'releases' }/") {
            //authentication(userName: nexusUsername, password: nexusPassword)
        }
    }
}
}

// 
// global definition of compile dependency
// for project logging
configure(subprojects)
{
    dependencies {
        compile libraries.slf4j_api
        compile libraries.log4j_slf4j_impl
        compile libraries.log4j_core
        compile libraries.log4j_api       
        testCompile 'junit:junit:4.12'
        compile 'com.google.guava:guava:14.0'
    }
}


task wrapper(type: Wrapper) {
    gradleVersion = '2.13'
}


