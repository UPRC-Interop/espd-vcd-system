<app-welcome></app-welcome>

<form #f="ngForm">

  <mat-card>
    <mat-card-title translate>espd.init.who.are.you</mat-card-title>
    <mat-card-content>
      <mat-radio-group name="chooseRole" ngModel>
        <mat-radio-button color="primary" name="role" value="CA" (change)="handleRole(CA)" #CA>
          {{ 'espd.init.i.am.ca' | translate}}
        </mat-radio-button>
        <mat-radio-button color="primary" name="role" value="EO" (change)="handleRole(EO)" #EO>
          {{ 'espd.init.i.am.eop' | translate}}
        </mat-radio-button>
      </mat-radio-group>
    </mat-card-content>
  </mat-card>
  <mat-card *ngIf="isCA">
    <mat-card-title translate>espd.init.what.you.do</mat-card-title>
    <mat-card-content>
      <div class="wrapper">
        <mat-form-field class="width">
          <input matInput name="noticeNumber" placeholder="{{'espd.init.ted.reception.id.placeholder' | translate}}"
                 required ngModel>
        </mat-form-field>
        <mat-radio-group name="caOptions" ngModel>
          <mat-radio-button color="primary"
                            name="caOption"
                            value="createNewESPD"
                            (change)="handleCASelection(createNewESPD)"
                            #createNewESPD>{{'espd.init.create.espd' | translate}}
          </mat-radio-button>
          <mat-radio-button color="primary"
                            name="caOption"
                            value="reuseESPD"
                            (change)="handleCASelection(reuseESPD)"
                            #reuseESPD>{{'espd.init.import.espd' | translate}}
          </mat-radio-button>
          <mat-radio-button color="primary"
                            name="caOption"
                            value="reviewESPD"
                            (change)="handleCASelection(reviewESPD)"
                            #reviewESPD>{{'espd.init.review.espd' | translate}}
          </mat-radio-button>
        </mat-radio-group>
      </div>
    </mat-card-content>
  </mat-card>

  <mat-card *ngIf="isCreateNewESPD && isCA">

    <mat-card-title>Select Version</mat-card-title>
    <mat-card-content>
      <mat-radio-group name="versions" ngModel>
        <mat-radio-button color="primary"
                          name="version"
                          value="v1"
                          (change)="handleVersionSelection(createV1)"
                          #createV1>Create v1
        </mat-radio-button>
        <mat-radio-button color="primary"
                          name="version"
                          value="v2"
                          (change)="handleVersionSelection(createV2)"
                          #createV2>Create v2
        </mat-radio-button>
      </mat-radio-group>
    </mat-card-content>

    <mat-card-title translate>espd.init.where.are.you.from.ca</mat-card-title>
    <mat-card-content>
      <mat-form-field>
        <mat-select name="CACountry" placeholder="{{'espd.init.select.country' | translate}}" ngModel>
          <mat-option>None</mat-option>
          <mat-option *ngFor="let country of countries" [value]="country.code">{{country.name}}</mat-option>
        </mat-select>
      </mat-form-field>
    </mat-card-content>
  </mat-card>

  <mat-card *ngIf="(isReuseESPD || isReviewESPD)&& isCA">
    <mat-card-title translate>espd.init.upload.document</mat-card-title>
    <mat-card-content>
      <label for="fileUploadCA" translate>espd.init.upload.request </label>
      <br>
      <input type="file" id="fileUploadCA"
             name="importCA"
             (change)="handleFileUpload($event.target.files)" required
             accept=".xml">
    </mat-card-content>
  </mat-card>

  <mat-card *ngIf="isEO">
    <mat-card-title translate>espd.init.what.you.do</mat-card-title>
    <mat-card-content>
      <mat-radio-group name="eoOptions" ngModel>
        <mat-radio-button color="primary"
                          name="eoOption"
                          value="importESPD"
                          (change)="handleEOSelection(importESPD)" #importESPD>
          {{'espd.init.import.espd' | translate }}
        </mat-radio-button>
        <mat-radio-button color="primary"
                          name="eoOption"
                          value="createResponse"
                          (change)="handleEOSelection(createResponse)" #createResponse>
          {{'espd.init.create.response' | translate}}
        </mat-radio-button>
      </mat-radio-group>
    </mat-card-content>
  </mat-card>

  <mat-card *ngIf="isImportESPD && isEO">
    <mat-card-title translate>espd.init.upload.document</mat-card-title>
    <mat-card-content>
      <label for="fileUploadEO" translate>espd.init.upload.request.response </label>
      <br>
      <input type="file" id="fileUploadEO"
             name="importEO"
             (change)="handleFileUpload($event.target.files)" required
             accept=".xml">
    </mat-card-content>
  </mat-card>

  <mat-card *ngIf="isCreateResponse && isEO">

    <mat-card-title>Select Version</mat-card-title>
    <mat-card-content>
      <mat-radio-group name="versions" ngModel>
        <mat-radio-button color="primary"
                          name="version"
                          value="v1"
                          (change)="handleVersionSelection(createV1)"
                          #createV1>Create v1
        </mat-radio-button>
        <mat-radio-button color="primary"
                          name="version"
                          value="v2"
                          (change)="handleVersionSelection(createV2)"
                          #createV2>Create v2
        </mat-radio-button>
      </mat-radio-group>
    </mat-card-content>

    <mat-card-title translate>espd.init.where.are.you.from.eo</mat-card-title>
    <mat-card-content>
      <mat-form-field>
        <mat-select name="EOCountry" placeholder="{{'espd.init.select.country' | translate}}" ngModel>
          <mat-option>None</mat-option>
          <mat-option *ngFor="let country of countries" [value]="country.code">{{country.name}}</mat-option>
        </mat-select>
      </mat-form-field>
    </mat-card-content>
  </mat-card>

  <button type="button" mat-raised-button color="primary" (click)="onStartSubmit(f)" matStepperNext>
    {{ 'espd.gui.next' | translate}}
  </button>

</form>
