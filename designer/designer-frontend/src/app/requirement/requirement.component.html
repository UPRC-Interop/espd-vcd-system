<!--

    Copyright 2016-2018 University of Piraeus Research Center

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

-->
<div [formGroup]="form">
  <label *ngIf="req.responseDataType=='INDICATOR'" [attr.for]="req.uuid">{{req.description}}</label>


  <div [ngSwitch]="req.responseDataType">
    <mat-form-field *ngSwitchDefault>
      <label [attr.for]="req.uuid">{{req.description}}</label>
      <br>
      <input matInput [formControlName]="req.uuid" [id]="req.uuid" [required]="req.mandatory">
      <mat-error *ngIf="form.get(req.uuid).invalid">
        <input-validation-error [formControlErrors]="form.get(req.uuid).errors"></input-validation-error>
      </mat-error>
    </mat-form-field>

    <mat-form-field *ngSwitchCase="'QUANTITY_YEAR'">
      <label [attr.for]="req.uuid">{{req.description}}</label>
      <br>
      <input matInput [formControlName]="req.uuid" [id]="req.uuid" [required]="req.mandatory" integer>
      <mat-error *ngIf="form.get(req.uuid).invalid">
        <input-validation-error [formControlErrors]="form.get(req.uuid).errors"></input-validation-error>
      </mat-error>
    </mat-form-field>

    <mat-form-field *ngSwitchCase="'QUANTITY_INTEGER'">
      <label [attr.for]="req.uuid">{{req.description}}</label>
      <br>
      <input matInput [formControlName]="req.uuid" [id]="req.uuid" [required]="req.mandatory" integer>
      <mat-error *ngIf="form.get(req.uuid).invalid">
        <input-validation-error [formControlErrors]="form.get(req.uuid).errors"></input-validation-error>
      </mat-error>
    </mat-form-field>

    <mat-form-field *ngSwitchCase="'DATE'">
      <label [attr.for]="req.uuid">{{req.description}}</label>
      <br>
      <input [appDateValidationFix]="form.get(req.uuid)" matInput [matDatepicker]="picker" [formControlName]="req.uuid"
             [id]="req.uuid" [required]="req.mandatory">
      <mat-error *ngIf="form.get(req.uuid).invalid">
        <input-validation-error [formControlErrors]="form.get(req.uuid).errors"></input-validation-error>
      </mat-error>
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>

    <div *ngSwitchCase="'PERCENTAGE'">
      <label class="no-margin" [attr.for]="req.uuid">{{req.description}}</label>
      <mat-form-field>
        <input matInput [formControlName]="req.uuid" [id]="req.uuid" percentage [required]="req.mandatory">
        <span matPrefix>%&nbsp;</span>
        <mat-error *ngIf="form.get(req.uuid).invalid">
          <input-validation-error [formControlErrors]="form.get(req.uuid).errors"></input-validation-error>
        </mat-error>
      </mat-form-field>
    </div>

    <div class="period" *ngSwitchCase="'PERIOD'" >
      <div class="periodv2" *ngIf="APIService.version === 'v2'">
        <label [attr.for]="req.uuid+'startDate'">Start Date: </label>
        <br>
        <mat-form-field >
          <input [appDateValidationFix]="form.get(req.uuid+'startDate')" matInput [matDatepicker]="startPicker"
                 [formControlName]="req.uuid+'startDate'" [id]="req.uuid+'startDate'" [required]="req.mandatory">
          <mat-error *ngIf="form.get(req.uuid+'startDate').invalid">
            <input-validation-error [formControlErrors]="form.get(req.uuid+'startDate').errors"></input-validation-error>
          </mat-error>
          <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
          <mat-datepicker #startPicker></mat-datepicker>
        </mat-form-field>
        <br>
        <label [attr.for]="req.uuid+'endDate'">End Date: </label>
        <br>
        <mat-form-field >
          <input [appDateValidationFix]="form.get(req.uuid+'endDate')" matInput [matDatepicker]="endPicker"
                 [formControlName]="req.uuid+'endDate'" [id]="req.uuid+'endDate'" [required]="req.mandatory">
          <mat-error *ngIf="form.get(req.uuid+'endDate').invalid">
            <input-validation-error [formControlErrors]="form.get(req.uuid+'endDate').errors"></input-validation-error>
          </mat-error>
          <mat-datepicker-toggle matSuffix [for]="endPicker"></mat-datepicker-toggle>
          <mat-datepicker #endPicker></mat-datepicker>
        </mat-form-field>
      </div>
      <div class="periodv1" *ngIf="APIService.version === 'v1'">
        <label [attr.for]="req.uuid">{{req.description}}</label>
        <br>
        <mat-form-field >
          <input matInput [formControlName]="req.uuid" [id]="req.uuid" >
        </mat-form-field>
      </div>
    </div>



    <mat-form-field *ngSwitchCase="'CODE_COUNTRY'">
      <label [attr.for]="req.uuid">{{req.description}}</label>
      <br>
      <mat-select [formControlName]="req.uuid" [id]="req.uuid" [required]="req.mandatory">
        <mat-option>None</mat-option>
        <mat-option *ngFor="let country of countries" [value]="country.code">{{country.name}}</mat-option>
      </mat-select>
      <mat-error *ngIf="form.get(req.uuid).invalid">
        <input-validation-error [formControlErrors]="form.get(req.uuid).errors"></input-validation-error>
      </mat-error>
    </mat-form-field>


    <div class="amount" *ngSwitchCase="'AMOUNT'">
      <label [attr.for]="req.uuid">{{req.description}}</label>
      <br>
      <mat-form-field>
        <input matInput [formControlName]="req.uuid" [id]="req.uuid" amount [required]="req.mandatory">
        <mat-error *ngIf="form.get(req.uuid).invalid">
          <input-validation-error [formControlErrors]="form.get(req.uuid).errors"></input-validation-error>
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-select [formControlName]="req.uuid+'currency'" [id]="req.uuid+'currency'">
          <mat-option>None</mat-option>
          <mat-option *ngFor="let curr of currency" [value]="curr.code">{{curr.code}} ( {{curr.name}} )</mat-option>
        </mat-select>
        <mat-error *ngIf="form.get(req.uuid+'currency').invalid">
          <input-validation-error [formControlErrors]="form.get(req.uuid+'currency').errors"></input-validation-error>
        </mat-error>
      </mat-form-field>
    </div>

    <div class="evidence_identifier" *ngSwitchCase="'EVIDENCE_IDENTIFIER'">
      <label [attr.for]="req.uuid+'evidenceUrl'">URL: </label>
      <br>
      <mat-form-field>
        <input matInput [formControlName]="req.uuid+'evidenceUrl'" [id]="req.uuid+'evidenceUrl'"
               [required]="req.mandatory">
        <mat-error *ngIf="form.controls[''+ req.uuid+'evidenceUrl'].invalid">
          <input-validation-error
            [formControlErrors]="form.controls[''+ req.uuid+'evidenceUrl'].errors"></input-validation-error>
        </mat-error>
      </mat-form-field>
      <label [attr.for]="req.uuid+'evidenceCode'">Reference/Code: </label>
      <br>
      <mat-form-field>
        <input matInput [formControlName]="req.uuid+'evidenceCode'" [id]="req.uuid+'evidenceCode'"
               [required]="req.mandatory">
        <mat-error *ngIf="form.controls[''+ req.uuid+'evidenceCode'].invalid">
          <input-validation-error
            [formControlErrors]="form.controls[''+ req.uuid+'evidenceCode'].errors"></input-validation-error>
        </mat-error>
      </mat-form-field>
      <label [attr.for]="req.uuid+'evidenceIssuer'">Issuer: </label>
      <br>
      <mat-form-field>
        <input matInput [formControlName]="req.uuid+'evidenceIssuer'" [id]="req.uuid+'evidenceIssuer'"
               [required]="req.mandatory">
        <mat-error *ngIf="form.controls[''+ req.uuid+'evidenceIssuer'].invalid">
          <input-validation-error
            [formControlErrors]="form.controls[''+ req.uuid+'evidenceIssuer'].errors"></input-validation-error>
        </mat-error>
      </mat-form-field>

    </div>


    <mat-radio-group [id]="req.uuid" *ngSwitchCase="'INDICATOR'" [formControlName]="req.uuid">
      <mat-radio-button color="primary"
                        [value]=true>YES
      </mat-radio-button>
      <mat-radio-button color="primary"
                        [value]=false>NO
      </mat-radio-button>
    </mat-radio-group>

  </div>
</div>



